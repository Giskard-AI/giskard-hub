<!DOCTYPE html>

<html :class="{'dark': darkMode === 'dark' || (darkMode === 'system' &amp;&amp; window.matchMedia('(prefers-color-scheme: dark)').matches)}" class="scroll-smooth" data-content_root="../../" lang="en" x-data="{ darkMode: localStorage.getItem('darkMode') || localStorage.setItem('darkMode', 'system'), activeSection: '' }" x-init="$watch('darkMode', val =&gt; localStorage.setItem('darkMode', val))">
<head>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<meta charset="utf-8"/>
<meta content="white" media="(prefers-color-scheme: light)" name="theme-color"/>
<meta content="black" media="(prefers-color-scheme: dark)" name="theme-color"/>
<meta content="width=device-width, initial-scale=1" name="viewport"/>
<title>Annotate test dataset | Giskard Hub  documentation</title>
<meta content="Annotate test dataset | Giskard Hub  documentation" property="og:title"/>
<meta content="Annotate test dataset | Giskard Hub  documentation" name="twitter:title"/>
<link href="../../_static/pygments.css?v=beddf052" rel="stylesheet" type="text/css"/>
<link href="../../_static/theme.css?v=ecdfb4fc" rel="stylesheet" type="text/css"/>
<link href="../../_static/sphinx-design.min.css?v=95c83b7e" rel="stylesheet" type="text/css"/>
<link href="../../_static/pygments-dark.css?v=d7994ac5" rel="stylesheet" type="text/css"/>
<link href="../../_static/custom.css?v=d7beac4d" rel="stylesheet" type="text/css"/>
<link href="../../_static/awesome-sphinx-design.css?v=a54cf077" rel="stylesheet" type="text/css"/>
<link href="../../_static/favicon.ico" rel="icon"/>
<link href="../../search.html" rel="search" title="Search"/>
<link href="../../genindex.html" rel="index" title="Index"/>
<link href="run-evaluations.html" rel="next" title="Run and compare evaluations"/>
<link href="create-dataset.html" rel="prev" title="Create test dataset"/>
<script>
    <!-- Prevent Flash of wrong theme -->
      const userPreference = localStorage.getItem('darkMode');
      let mode;
      if (userPreference === 'dark' || window.matchMedia('(prefers-color-scheme: dark)').matches) {
        mode = 'dark';
        document.documentElement.classList.add('dark');
      } else {
        mode = 'light';
      }
      if (!userPreference) {localStorage.setItem('darkMode', mode)}
    </script>
</head>
<body :class="{ 'overflow-hidden': showSidebar }" class="min-h-screen font-sans antialiased bg-background text-foreground" x-data="{ showSidebar: false }">
<div @click.self="showSidebar = false" class="fixed inset-0 z-50 overflow-hidden bg-background/80 backdrop-blur-sm md:hidden" x-cloak="" x-show="showSidebar"></div><div class="relative flex flex-col min-h-screen" id="page"><a class="absolute top-0 left-0 z-[100] block bg-background p-4 text-xl transition -translate-x-full opacity-0 focus:translate-x-0 focus:opacity-100" href="#content">
      Skip to content
    </a><header class="sticky top-0 z-40 w-full border-b shadow-sm border-border supports-backdrop-blur:bg-background/60 bg-background/95 backdrop-blur"><div class="container flex items-center h-14">
<div class="hidden mr-4 md:flex">
<a class="flex items-center mr-6" href="../../index.html">
<img alt="Logo" class="mr-2 hidden dark:block" height="24" src="../../_static/logo_white.png" width="24"/>
<img alt="Logo" class="mr-2 dark:hidden" height="24" src="../../_static/logo_black.png" width="24"/><span class="hidden font-bold sm:inline-block text-clip whitespace-nowrap">Giskard Hub  documentation</span>
</a></div><button @click="showSidebar = true" class="inline-flex items-center justify-center h-10 px-0 py-2 mr-2 text-base font-medium transition-colors rounded-md hover:text-accent-foreground hover:bg-transparent md:hidden" type="button">
<svg aria-hidden="true" fill="currentColor" height="24" viewbox="0 96 960 960" width="24" xmlns="http://www.w3.org/2000/svg">
<path d="M152.587 825.087q-19.152 0-32.326-13.174t-13.174-32.326q0-19.152 13.174-32.326t32.326-13.174h440q19.152 0 32.326 13.174t13.174 32.326q0 19.152-13.174 32.326t-32.326 13.174h-440Zm0-203.587q-19.152 0-32.326-13.174T107.087 576q0-19.152 13.174-32.326t32.326-13.174h320q19.152 0 32.326 13.174T518.087 576q0 19.152-13.174 32.326T472.587 621.5h-320Zm0-203.587q-19.152 0-32.326-13.174t-13.174-32.326q0-19.152 13.174-32.326t32.326-13.174h440q19.152 0 32.326 13.174t13.174 32.326q0 19.152-13.174 32.326t-32.326 13.174h-440ZM708.913 576l112.174 112.174q12.674 12.674 12.674 31.826t-12.674 31.826Q808.413 764.5 789.261 764.5t-31.826-12.674l-144-144Q600 594.391 600 576t13.435-31.826l144-144q12.674-12.674 31.826-12.674t31.826 12.674q12.674 12.674 12.674 31.826t-12.674 31.826L708.913 576Z"></path>
</svg>
<span class="sr-only">Toggle navigation menu</span>
</button>
<div class="flex items-center justify-between flex-1 space-x-2 sm:space-x-4 md:justify-end">
<div class="flex-1 w-full md:w-auto md:flex-none"><form @keydown.k.window.meta="$refs.search.focus()" action="../../search.html" class="relative flex items-center group" id="searchbox" method="get">
<input aria-label="Search the docs" class="inline-flex items-center font-medium transition-colors bg-transparent focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 ring-offset-background border border-input hover:bg-accent focus:bg-accent hover:text-accent-foreground focus:text-accent-foreground hover:placeholder-accent-foreground py-2 px-4 relative h-9 w-full justify-start rounded-[0.5rem] text-sm text-muted-foreground sm:pr-12 md:w-40 lg:w-64" id="search-input" name="q" placeholder="Search ..." type="search" x-ref="search"/>
<kbd class="pointer-events-none absolute right-1.5 top-2 hidden h-5 select-none text-muted-foreground items-center gap-1 rounded border border-border bg-muted px-1.5 font-mono text-[10px] font-medium opacity-100 sm:flex group-hover:bg-accent group-hover:text-accent-foreground">
<span class="text-xs">⌘</span>
    K
  </kbd>
</form>
</div>
<nav class="flex items-center space-x-1">
<button @click="darkMode = darkMode === 'light' ? 'dark' : 'light'" aria-label="Color theme switcher" class="relative inline-flex items-center justify-center px-0 text-sm font-medium transition-colors rounded-md hover:bg-accent hover:text-accent-foreground h-9 w-9" type="button">
<svg class="absolute transition-all scale-100 rotate-0 dark:-rotate-90 dark:scale-0" fill="currentColor" height="24" viewbox="0 96 960 960" width="24" xmlns="http://www.w3.org/2000/svg">
<path d="M480 685q45.456 0 77.228-31.772Q589 621.456 589 576q0-45.456-31.772-77.228Q525.456 467 480 467q-45.456 0-77.228 31.772Q371 530.544 371 576q0 45.456 31.772 77.228Q434.544 685 480 685Zm0 91q-83 0-141.5-58.5T280 576q0-83 58.5-141.5T480 376q83 0 141.5 58.5T680 576q0 83-58.5 141.5T480 776ZM80 621.5q-19.152 0-32.326-13.174T34.5 576q0-19.152 13.174-32.326T80 530.5h80q19.152 0 32.326 13.174T205.5 576q0 19.152-13.174 32.326T160 621.5H80Zm720 0q-19.152 0-32.326-13.174T754.5 576q0-19.152 13.174-32.326T800 530.5h80q19.152 0 32.326 13.174T925.5 576q0 19.152-13.174 32.326T880 621.5h-80Zm-320-320q-19.152 0-32.326-13.174T434.5 256v-80q0-19.152 13.174-32.326T480 130.5q19.152 0 32.326 13.174T525.5 176v80q0 19.152-13.174 32.326T480 301.5Zm0 720q-19.152 0-32.326-13.17Q434.5 995.152 434.5 976v-80q0-19.152 13.174-32.326T480 850.5q19.152 0 32.326 13.174T525.5 896v80q0 19.152-13.174 32.33-13.174 13.17-32.326 13.17ZM222.174 382.065l-43-42Q165.5 327.391 166 308.239t13.174-33.065q13.435-13.674 32.587-13.674t32.065 13.674l42.239 43q12.674 13.435 12.555 31.706-.12 18.272-12.555 31.946-12.674 13.674-31.445 13.413-18.772-.261-32.446-13.174Zm494 494.761-42.239-43q-12.674-13.435-12.674-32.087t12.674-31.565Q686.609 756.5 705.38 757q18.772.5 32.446 13.174l43 41.761Q794.5 824.609 794 843.761t-13.174 33.065Q767.391 890.5 748.239 890.5t-32.065-13.674Zm-42-494.761Q660.5 369.391 661 350.62q.5-18.772 13.174-32.446l41.761-43Q728.609 261.5 747.761 262t33.065 13.174q13.674 13.435 13.674 32.587t-13.674 32.065l-43 42.239q-13.435 12.674-31.706 12.555-18.272-.12-31.946-12.555Zm-495 494.761Q165.5 863.391 165.5 844.239t13.674-32.065l43-42.239q13.435-12.674 32.087-12.674t31.565 12.674Q299.5 782.609 299 801.38q-.5 18.772-13.174 32.446l-41.761 43Q231.391 890.5 212.239 890t-33.065-13.174ZM480 576Z"></path>
</svg>
<svg class="absolute transition-all scale-0 rotate-90 dark:rotate-0 dark:scale-100" fill="currentColor" height="24" viewbox="0 96 960 960" width="24" xmlns="http://www.w3.org/2000/svg">
<path d="M480 936q-151 0-255.5-104.5T120 576q0-138 90-239.5T440 218q25-3 39 18t-1 44q-17 26-25.5 55t-8.5 61q0 90 63 153t153 63q31 0 61.5-9t54.5-25q21-14 43-1.5t19 39.5q-14 138-117.5 229T480 936Zm0-80q88 0 158-48.5T740 681q-20 5-40 8t-40 3q-123 0-209.5-86.5T364 396q0-20 3-40t8-40q-78 32-126.5 102T200 576q0 116 82 198t198 82Zm-10-270Z"></path>
</svg>
</button>
</nav>
</div>
</div>
</header>
<div class="flex-1"><div class="container flex-1 items-start md:grid md:grid-cols-[220px_minmax(0,1fr)] md:gap-6 lg:grid-cols-[240px_minmax(0,1fr)] lg:gap-10"><aside :aria-hidden="!showSidebar" :class="{ 'translate-x-0': showSidebar }" class="fixed inset-y-0 left-0 md:top-14 z-50 md:z-30 bg-background md:bg-transparent transition-all duration-100 -translate-x-full md:translate-x-0 ml-0 p-6 md:p-0 md:-ml-2 md:h-[calc(100vh-3.5rem)] w-5/6 md:w-full shrink-0 overflow-y-auto border-r border-border md:sticky" id="left-sidebar">
<a class="!justify-start text-sm md:!hidden bg-background" href="../../index.html">
<img alt="Logo" class="mr-2 hidden dark:block" height="16" src="../../_static/logo_white.png" width="16"/>
<img alt="Logo" class="mr-2 dark:hidden" height="16" src="../../_static/logo_black.png" width="16"/><span class="font-bold text-clip whitespace-nowrap">Giskard Hub  documentation</span>
</a>
<div class="relative overflow-hidden md:overflow-auto my-4 md:my-0 h-[calc(100vh-8rem)] md:h-auto">
<div class="overflow-y-auto h-full w-full relative pr-6"><nav class="table w-full min-w-full my-6 lg:my-8">
<p class="caption" role="heading"><span class="caption-text">Giskard Hub</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../quickstart.html">Quickstart &amp; Setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="create-dataset.html">Create test dataset</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Annotate test dataset</a></li>
<li class="toctree-l1"><a class="reference internal" href="run-evaluations.html">Run and compare evaluations</a></li>
<li class="toctree-l1"><a class="reference internal" href="playground.html">Create tests in playground</a></li>
<li class="toctree-l1"><a class="reference internal" href="continuous-red-teaming.html">Continuous red teaming</a></li>
<li class="toctree-l1"><a class="reference internal" href="access-rights.html">Set access rights</a></li>
<li class="toctree-l1"><a class="reference internal" href="../glossary.html">Glossary</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Giskard Python SDK</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../cli/quickstart.html">Quickstart</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cli/guide/manage-datasets.html">Manage datasets</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cli/guide/run-evaluations.html">Run evaluations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cli/guide/local-evaluation.html">Evaluate local models</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Developer Reference</span></p>
<ul>
<li class="toctree-l1" x-data="{ expanded: $el.classList.contains('current') ? true : false }"><a :class="{ 'expanded' : expanded }" @click="expanded = !expanded" class="reference internal expandable" href="../../cli/reference/index.html">Python API Reference<button @click.prevent.stop="expanded = !expanded" type="button"><span class="sr-only"></span><svg fill="currentColor" height="18px" stroke="none" viewbox="0 0 24 24" width="18px" xmlns="http://www.w3.org/2000/svg"><path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"></path></svg></button></a><ul x-show="expanded">
<li class="toctree-l2"><a class="reference internal" href="../../cli/reference/client.html">Client</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cli/reference/entities/index.html">Entities</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cli/reference/resources/index.html">Resources</a></li>
</ul>
</li>
</ul>
</nav>
</div>
</div>
<button @click="showSidebar = false" class="absolute md:hidden right-4 top-4 rounded-sm opacity-70 transition-opacity hover:opacity-100" type="button">
<svg class="h-4 w-4" fill="currentColor" height="24" stroke="none" viewbox="0 96 960 960" width="24" xmlns="http://www.w3.org/2000/svg">
<path d="M480 632 284 828q-11 11-28 11t-28-11q-11-11-11-28t11-28l196-196-196-196q-11-11-11-28t11-28q11-11 28-11t28 11l196 196 196-196q11-11 28-11t28 11q11 11 11 28t-11 28L536 576l196 196q11 11 11 28t-11 28q-11 11-28 11t-28-11L480 632Z"></path>
</svg>
</button>
</aside>
<main class="relative py-6 lg:gap-10 lg:py-8 xl:grid xl:grid-cols-[1fr_300px]">
<div class="w-full min-w-0 mx-auto">
<nav aria-label="breadcrumbs" class="flex items-center mb-4 space-x-1 text-sm text-muted-foreground">
<a class="overflow-hidden text-ellipsis whitespace-nowrap hover:text-foreground" href="../../index.html">
<span class="hidden md:inline">Giskard Hub  documentation</span>
<svg aria-label="Home" class="md:hidden" fill="currentColor" height="18" stroke="none" viewbox="0 96 960 960" width="18" xmlns="http://www.w3.org/2000/svg">
<path d="M240 856h120V616h240v240h120V496L480 316 240 496v360Zm-80 80V456l320-240 320 240v480H520V696h-80v240H160Zm320-350Z"></path>
</svg>
</a>
<div class="mr-1">/</div><span aria-current="page" class="font-medium text-foreground overflow-hidden text-ellipsis whitespace-nowrap">Annotate test dataset</span>
</nav>
<div id="content" role="main">
<section id="annotate-test-dataset">
<h1>Annotate test dataset<a class="headerlink" href="#annotate-test-dataset" title="Link to this heading">¶</a></h1>
<p>Datasets are collection of test cases that will be used to verify the correct operation of your AI agent.</p>
<p>Each test case is composed of a conversation and its associated evaluation parameters (e.g. an expected answer, rules that the agent must respect, etc.).</p>
<p>A conversation is a list of messages. In the simplest case, a conversation is composed by a single message by the user. In the testing phase, we will send this message to your agent, record its answer, and evaluate it against the criteria that you defined in the test case.</p>
<p>In more advanced cases, the conversation is a multi-turn dialogue between the user and the agent, terminating with a final user message. When testing, we will pass the conversation history to your agent to generate the response that will be evaluated.</p>
<p>The Datasets section of the LLM Hub provides an interface for reviewing and assigning evaluation criteria (checks) to conversations.</p>
<section id="create-a-conversation">
<h2>Create a conversation<a class="headerlink" href="#create-a-conversation" title="Link to this heading" x-intersect.margin.0%.0%.-70%.0%="activeSection = '#create-a-conversation'">¶</a></h2>
<a class="reference internal image-reference" href="../../_images/annotation-studio.png"><img alt='"Iteratively design your test cases using a business-centric &amp; interactive interface."' class="align-center" src="../../_images/annotation-studio.png" style="width: 800px;"/>
</a>
<p>A conversation is a list of messages, alternating between <strong>user</strong> messages and <strong>assistant</strong> roles. When designing your test cases, you can decide to provide a conversation history by adding multiple turns. Remind however that the conversation should always end with a <strong>user</strong> message. The next <strong>assistant</strong> completion will be generated and evaluated at test time.</p>
<section id="simple-conversation">
<h3>Simple conversation<a class="headerlink" href="#simple-conversation" title="Link to this heading" x-intersect.margin.0%.0%.-70%.0%="activeSection = '#simple-conversation'">¶</a></h3>
<p>In the simplest case, a conversation is composed by a single message by the user. Here’s an example:</p>
<p>For example, if you want to test the ability of the model to handle a multi-turn conversation, you could write the following conversation:</p>
<blockquote>
<div><p><strong>User:</strong> Hello, which language is your open-source library written in?</p>
</div></blockquote>
</section>
<section id="multi-turn-conversation">
<h3>Multi-turn conversation<a class="headerlink" href="#multi-turn-conversation" title="Link to this heading" x-intersect.margin.0%.0%.-70%.0%="activeSection = '#multi-turn-conversation'">¶</a></h3>
<p>If you want to test the ability of the model to handle a multi-turn conversation, you can write provide a conversation history with previous <strong>assistant</strong> messages:</p>
<blockquote>
<div><p><strong>User:</strong> Hello, I wanted to have more information about your open-source library.</p>
<p><strong>Assistant:</strong> Hello! I’m happy to help you learn more about our library. What would you like to know?</p>
<p><strong>User:</strong> Which language is it written in?</p>
</div></blockquote>
<p>You can provide as many turns as you want. Just remember that the conversation should always end with a <strong>user</strong> message, and the next <strong>assistant</strong> completion will be generated and evaluated at test time.</p>
</section>
<section id="answer-examples">
<h3>Answer examples<a class="headerlink" href="#answer-examples" title="Link to this heading" x-intersect.margin.0%.0%.-70%.0%="activeSection = '#answer-examples'">¶</a></h3>
<p>You can also provide an “answer example” for each test. The answer example will not be used at test time, but it can be useful while annotating the dataset with your evaluation criteria. In fact, you can test your evaluation criteria against the answer example to make sure they are working as expected.</p>
<dl class="simple">
<dt>There are multiple ways to provide an answer example:</dt><dd><ol class="arabic simple">
<li><p>If you are importing a dataset, you can import the answer examples together with the conversations by providing a <cite>demo_output</cite> field. This is useful for example when you are importing production data and you want to keep a reference of the actual answer that was given by your agent in production.</p></li>
<li><p>You can generate the bot’s answer by clicking on the three-dot button and selecting “Replace the assistant message”.</p></li>
<li><p>You can also write your own ansewr example from scratch. This is particularly useful when you are testing your evaluation criteria against a specific answer. For example, you may want to write a non-compliant answer and make sure that your evaluation criteria will correctly flag it.</p></li>
</ol>
</dd>
</dl>
<p>If you haven’t added an answer example, by default, the Hub will populate this field with the assistant answer obtained upon the first evaluation run on your dataset.</p>
</section>
</section>
<section id="assign-a-check-to-a-conversation">
<h2>Assign a check to a conversation<a class="headerlink" href="#assign-a-check-to-a-conversation" title="Link to this heading" x-intersect.margin.0%.0%.-70%.0%="activeSection = '#assign-a-check-to-a-conversation'">¶</a></h2>
<p>Assigning checks to a conversation enables you to set the right requirements for your conversation. Various checks are available at Giskard:</p>
<section id="correctness-check">
<h3>Correctness Check<a class="headerlink" href="#correctness-check" title="Link to this heading" x-intersect.margin.0%.0%.-70%.0%="activeSection = '#correctness-check'">¶</a></h3>
<p>Check whether all information from the reference answer is present in the model answer without contradiction. Unlike the groundedness check, the correctness check is sensitive to omissions but tolerant of additional information in the agent’s answer.</p>
<div class="admonition-example admonition">
<p class="admonition-title">Example</p>
<p><strong>Reference Answer</strong>: Paris is the capital of France, it was founded around 200 BC.</p>
<p><strong>Failure examples</strong>:</p>
<ul class="simple">
<li><p>The capital of France is Paris.</p>
<ul>
<li><p><em>Reason: The answer does not specify when the city of Paris was founded</em></p></li>
</ul>
</li>
<li><p>The capital of France is Paris, it was founded in 200 AD.</p>
<ul>
<li><p><em>Reason: The answer contradicts the reference which states that Paris was founded around 200 BC, and not 200 AD</em></p></li>
</ul>
</li>
</ul>
<p><strong>Success example</strong>:</p>
<ul class="simple">
<li><p>The capital of France is Paris, the first settlement dates from 200 BC.</p></li>
</ul>
</div>
</section>
<section id="conformity-check">
<h3>Conformity Check<a class="headerlink" href="#conformity-check" title="Link to this heading" x-intersect.margin.0%.0%.-70%.0%="activeSection = '#conformity-check'">¶</a></h3>
<p>Given a rule or criterion, check whether the model answer complies with this rule. This can be used to check business specific behavior or constraints. A conformity check may have several rules. Each rule should check a unique and unambiguous behavior. Here are a few examples of rules:</p>
<ul class="simple">
<li><p>The model should not talk about {{competitor company}}.</p></li>
<li><p>The model should only answer in English.</p></li>
<li><p>The model should always keep a professional tone.</p></li>
</ul>
<div class="admonition-example admonition">
<p class="admonition-title">Example</p>
<p><strong>Rule</strong>: The model should not give any financial advice or personalized recommendations.</p>
<p><strong>Failure example</strong>:</p>
<ul class="simple">
<li><p>You should definitely invest into bitcoin in addition to your saving plan, since you want to buy a flat quickly, the yield is much higher with bitcoin.</p>
<ul>
<li><p><em>Reason: The model answer contradicts the rule which states that the model should not give any financial advice or personalized recommendations.</em></p></li>
</ul>
</li>
</ul>
<p><strong>Success example</strong>:</p>
<ul class="simple">
<li><p>I’m sorry, I cannot give you specific financial advice, to get personalized recommandation I suggest that you contact our dedicated customer service.</p></li>
</ul>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>To write effective rules, remember the following best practices:</p>
<ul class="simple">
<li><p><strong>Avoid General Rules Unrelated to the Conversation</strong></p>
<ul>
<li><p><em>Example of wrong usage:</em> “The agent should not discriminate based on gender, sexual orientation, religion, or profession” when responding to a user question that has no connection to biases and discrimination.</p></li>
<li><p><em>Reason:</em>  Unit test logic helps with diagnostics (1 test = 1 precise behavior). Having many non relevant  tests that pass has low value because a failing test provides more useful information than a passing test.</p></li>
<li><p><em>Best Practice:</em> Minimize the number of rules per conversation and only choose rules likely to cause the test to fail.</p></li>
</ul>
</li>
<li><p><strong>Break Down Policies into Multiple Ones</strong></p>
<ul>
<li><p><em>Example of wrong usage:</em> “The agent should not respond to requests about illegal topics and should focus on banking and insurance-related questions.”</p></li>
<li><p><em>Reason:</em>  Long rules with large scope are difficult to maintain and interpret for the evaluator and they make it harder the debugging process.</p></li>
<li><p><em>Best Practice:</em> Add multiple rules within the same check to ensure the entire set is interpreted globally.</p></li>
</ul>
</li>
<li><p><strong>Write Custom Checks when your rules apply to multiple conversations</strong></p>
<ul>
<li><p>Creating and enabling a custom check for multiple conversations is useful when you want to display the evaluation results for all conversations where the custom check is enabled.</p></li>
<li><p><em>Examples of generic rules that are likely to be used more than once</em>: “The agent should not discriminate based on gender, sexual orientation, religion, or profession.” “The bot should answer in English.”</p></li>
</ul>
</li>
</ul>
</div>
</section>
<section id="groundedness-check">
<h3>Groundedness Check<a class="headerlink" href="#groundedness-check" title="Link to this heading" x-intersect.margin.0%.0%.-70%.0%="activeSection = '#groundedness-check'">¶</a></h3>
<p>Check whether all information from the bot’s answer is present in the given context without contradiction. Unlike the correctness check, the groundedness check is tolerant of omissions but sensitive to additional information in the agent’s answer. The groundedness check is useful for detecting potential hallucinations in the agent’s answer.</p>
<div class="admonition-example admonition">
<p class="admonition-title">Example</p>
<p><strong>Reference Context</strong>: Sir Edmund Hillary, a New Zealand mountaineer, became famous for being one of the first people to reach the summit of Mount Everest with Tenzing Norgay on May 29, 1953.</p>
<p><strong>Failure examples</strong>:</p>
<ul class="simple">
<li><p>Edmund Hillary, born in 1919, was a great mountaineer who climb Mount Everest first.</p>
<ul>
<li><p><em>Reason: The reference context does not specify that Hillary was born in 1919</em></p></li>
</ul>
</li>
<li><p>Edmund Hillary reached the summit of Mount Everest in 1952.</p>
<ul>
<li><p><em>Reason: The reference context states that Hillary reached the summit of Mount Everest in 1953, and not in 1952</em></p></li>
</ul>
</li>
</ul>
<p><strong>Success examples</strong>:</p>
<ul class="simple">
<li><p>Edmund Hillary was the first person to reach the summit of Mount Everest in 1953.</p></li>
<li><p>Edmund Hillary, a renowned New Zealander, gained fame as one of the first climbers to summit Mount Everest alongside Tenzing Norgay on May 29, 1953.</p></li>
</ul>
</div>
</section>
<section id="string-matching-check">
<h3>String Matching Check<a class="headerlink" href="#string-matching-check" title="Link to this heading" x-intersect.margin.0%.0%.-70%.0%="activeSection = '#string-matching-check'">¶</a></h3>
<p>Check whether the given keyword or sentence is present in the model answer.</p>
<div class="admonition-example admonition">
<p class="admonition-title">Example</p>
<p><strong>Keyword</strong>: “Hello”</p>
<p><strong>Failure example</strong>:</p>
<ul class="simple">
<li><p>Hi, can I help you?</p>
<ul>
<li><p><em>Reason: The model answer does not contain the keyword ‘Hello’</em></p></li>
</ul>
</li>
</ul>
<p><strong>Success example</strong>:</p>
<ul class="simple">
<li><p>Hello, how may I help you today?</p></li>
</ul>
</div>
</section>
<section id="metadata-check">
<h3>Metadata Check<a class="headerlink" href="#metadata-check" title="Link to this heading" x-intersect.margin.0%.0%.-70%.0%="activeSection = '#metadata-check'">¶</a></h3>
<p>Check whether the agent answer contains the expected value at the specified JSON path. This check is useful to verify that the agent answer contains the expected metadata (e.g. whether a tool is called). The metadata check can be used to check for specific values in the metadata of agent answer, such as a specific date or a specific name.</p>
<div class="admonition-example-string-value admonition">
<p class="admonition-title">Example - string value</p>
<p><strong>JSON Path rule</strong>: Expecting <code class="docutils literal notranslate"><span class="pre">John</span></code> (string) at <code class="docutils literal notranslate"><span class="pre">$.user.name</span></code></p>
<p><strong>Failure examples</strong>:</p>
<ul class="simple">
<li><p>Metadata: <code class="docutils literal notranslate"><span class="pre">{"user":</span> <span class="pre">{"name":</span> <span class="pre">"Doe"}}</span></code></p>
<ul>
<li><p><em>Reason: Expected</em> <code class="docutils literal notranslate"><span class="pre">John</span></code> <em>at</em> <code class="docutils literal notranslate"><span class="pre">$.user.name</span></code> <em>but got</em> <code class="docutils literal notranslate"><span class="pre">Doe</span></code></p></li>
</ul>
</li>
</ul>
<p><strong>Success examples</strong>:</p>
<ul class="simple">
<li><p>Metadata: <code class="docutils literal notranslate"><span class="pre">{"user":</span> <span class="pre">{"name":</span> <span class="pre">"John"}}</span></code></p></li>
<li><p>Metadata: <code class="docutils literal notranslate"><span class="pre">{"user":</span> <span class="pre">{"name":</span> <span class="pre">"John</span> <span class="pre">Doe"}}</span></code></p></li>
</ul>
</div>
<div class="admonition-example-boolean-value admonition">
<p class="admonition-title">Example - boolean value</p>
<p><strong>JSON Path rule</strong>: Expecting <code class="docutils literal notranslate"><span class="pre">true</span></code> (boolean) at <code class="docutils literal notranslate"><span class="pre">$.output.success</span></code></p>
<p><strong>Failure examples</strong>:</p>
<ul class="simple">
<li><p>Metadata: <code class="docutils literal notranslate"><span class="pre">{"output":</span> <span class="pre">{"success":</span> <span class="pre">false}}</span></code></p>
<ul>
<li><p><em>Reason: Expected</em> <code class="docutils literal notranslate"><span class="pre">true</span></code> <em>at</em> <code class="docutils literal notranslate"><span class="pre">$.output.success</span></code> <em>but got</em> <code class="docutils literal notranslate"><span class="pre">false</span></code></p></li>
</ul>
</li>
<li><p>Metadata: <code class="docutils literal notranslate"><span class="pre">{"output":</span> <span class="pre">{}}</span></code></p>
<ul>
<li><p><em>Reason: JSON path</em> <code class="docutils literal notranslate"><span class="pre">$.output.success</span></code> <em>does not exist in metadata</em></p></li>
</ul>
</li>
</ul>
<p><strong>Success example</strong>:</p>
<ul class="simple">
<li><p>Metadata: <code class="docutils literal notranslate"><span class="pre">{"output":</span> <span class="pre">{"success":</span> <span class="pre">true}}</span></code></p></li>
</ul>
</div>
</section>
<section id="custom-check">
<h3>Custom Check<a class="headerlink" href="#custom-check" title="Link to this heading" x-intersect.margin.0%.0%.-70%.0%="activeSection = '#custom-check'">¶</a></h3>
<p>Custom checks are built on top of the built-in checks (Conformity, Correctness, Groundedness, String Matching and Metadata) and can be used to evaluate the quality of your agent’s responses.</p>
<p>The advantage of custom checks is that they can be tailored to your specific use case and can be enabled on many conversations at once.</p>
<p>On the Checks page, you can create custom checks by clicking on the “New check” button in the upper right corner of the screen.</p>
<a class="reference internal image-reference" href="../../_images/create-checks-list.png"><img alt='"List of checks"' class="align-center" src="../../_images/create-checks-list.png" style="width: 800px;"/>
</a>
<p>Next, set the parameters for the check:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Name</span></code>: Give your check a name.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Identifier</span></code>: A unique identifier for the check. It should be a string without spaces.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Description</span></code>: A brief description of the check.</p></li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">Type</span></code>: The type of the check, which can be one of the following:</dt><dd><ul>
<li><p><code class="docutils literal notranslate"><span class="pre">Correctness</span></code>: The output of the model should match the reference.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Conformity</span></code>: The conversation should follow a set of rules.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Groundedness</span></code>: The output of the model should be grounded in the conversation.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">String</span> <span class="pre">matching</span></code>: The output of the model should contain a specific string (keyword or sentence).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Metadata</span></code>: The metadata output of the model should match a list of JSON path rules.</p></li>
</ul>
</dd>
</dl>
</li>
<li><p>And a set of parameters specific to the check type. For example, for a <code class="docutils literal notranslate"><span class="pre">Correctness</span></code> check, you would need to provide the <code class="docutils literal notranslate"><span class="pre">Expected</span> <span class="pre">response</span></code> parameter, which is the reference answer.</p></li>
</ul>
<a class="reference internal image-reference" href="../../_images/create-checks-detail.png"><img alt='"Create a new check"' class="align-center" src="../../_images/create-checks-detail.png" style="width: 800px;"/>
</a>
<p>Once you have created a custom check, you can apply it to conversations in your dataset. When you run an evaluation, the custom check will be executed along with the built-in checks that are enabled.</p>
</section>
</section>
<section id="assign-a-tag-to-a-conversation">
<h2>Assign a tag to a conversation<a class="headerlink" href="#assign-a-tag-to-a-conversation" title="Link to this heading" x-intersect.margin.0%.0%.-70%.0%="activeSection = '#assign-a-tag-to-a-conversation'">¶</a></h2>
<p>Tags are optional but highly recommended for better organization. They allow you to filter the conversations later on and manage your chatbot’s performance more effectively.</p>
<section id="how-to-choose-the-right-tag">
<h3>How to choose the right tag?<a class="headerlink" href="#how-to-choose-the-right-tag" title="Link to this heading" x-intersect.margin.0%.0%.-70%.0%="activeSection = '#how-to-choose-the-right-tag'">¶</a></h3>
<p>To choose a tag, it is good to stick to a naming convention that you agreed on beforehand. Ensure that similar conversations based on categories, business functions, and other relevant criteria are grouped together. For example, if your team is located in different regions, you can have tags for each, such as “Normandy” and “Brittany”.</p>
<div class="admonition-categories-of-tags admonition">
<p class="admonition-title">Categories of Tags</p>
<ul>
<li><p><strong>Issue-Related Tags</strong>: These tags categorize the types of problems that might occur during a conversation.</p>
<p>Examples: “Hallucination”, “Misunderstanding”, “Incorrect Information”</p>
</li>
<li><p><strong>Attack-Oriented Tags</strong>: These tags relate to specific types of adversarial testing or attacks.</p>
<p>Examples: “SQL Injection Attempt”, “Phishing Query”, “Illegal Request”</p>
</li>
<li><p><strong>Legitimate Question Tags</strong>: These tags categorize standard, everyday user queries.</p>
<p>Examples: “Balance Inquiry”, “Loan Application”, “Account Opening”</p>
</li>
<li><p><strong>Context-Specific Tags</strong>: These tags pertain to specific business contexts or types of interactions.</p>
<p>Examples: “Caisse d’Epargne”, “Banco Popular”, “Corporate Banking”</p>
</li>
<li><p><strong>User Behavior Tags</strong>: These tags describe the nature of the user’s behavior or the style of interaction.</p>
<p>Examples: “Confused User”, “Angry Customer”, “New User”</p>
</li>
<li><p><strong>Temporal Tags</strong>: Depending on the life cycle of the testing process of the model.</p>
<p>Examples: “red teaming phase 1”, “red teaming phase 2”</p>
</li>
</ul>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<ul>
<li><p><strong>Use Multiple Tags if Necessary</strong>: Apply multiple tags to a single conversation to cover all relevant aspects.</p>
<p>Example: A conversation with a confused user asking about loan applications could be tagged with “Confused User”, “Loan Application”, and “Misunderstanding”.</p>
</li>
<li><p><strong>Hierarchical Tags</strong>: Implement a hierarchy in your tags to create a structured and clear tagging system.</p>
<p>Example: Use “User Issues &gt; Hallucination” to show the relationship between broader categories and specific issues.</p>
</li>
<li><p><strong>Stick to Agreed Naming Conventions</strong>: Ensure that your team agrees on and follows a consistent naming convention for tags to maintain organization and clarity.</p>
<p>Example: Decide on using either plural or singular forms for all tags and stick to it.</p>
</li>
</ul>
</div>
</section>
</section>
</section>
</div><div class="flex justify-between items-center pt-6 mt-12 border-t border-border gap-4">
<div class="mr-auto">
<a class="inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors border border-input hover:bg-accent hover:text-accent-foreground py-2 px-4" href="create-dataset.html">
<svg class="mr-2 h-4 w-4" fill="none" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
<polyline points="15 18 9 12 15 6"></polyline>
</svg>
        Create test dataset
      </a>
</div>
<div class="ml-auto">
<a class="inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors border border-input hover:bg-accent hover:text-accent-foreground py-2 px-4" href="run-evaluations.html">
        Run and compare evaluations
        <svg class="ml-2 h-4 w-4" fill="none" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
<polyline points="9 18 15 12 9 6"></polyline>
</svg>
</a>
</div>
</div></div><aside class="hidden text-sm xl:block" id="right-sidebar">
<div class="sticky top-16 -mt-10 max-h-[calc(100vh-5rem)] overflow-y-auto pt-6 space-y-2"><p class="font-medium">On this page</p>
<ul>
<li><a :data-current="activeSection === '#create-a-conversation'" class="reference internal" href="#create-a-conversation">Create a conversation</a><ul>
<li><a :data-current="activeSection === '#simple-conversation'" class="reference internal" href="#simple-conversation">Simple conversation</a></li>
<li><a :data-current="activeSection === '#multi-turn-conversation'" class="reference internal" href="#multi-turn-conversation">Multi-turn conversation</a></li>
<li><a :data-current="activeSection === '#answer-examples'" class="reference internal" href="#answer-examples">Answer examples</a></li>
</ul>
</li>
<li><a :data-current="activeSection === '#assign-a-check-to-a-conversation'" class="reference internal" href="#assign-a-check-to-a-conversation">Assign a check to a conversation</a><ul>
<li><a :data-current="activeSection === '#correctness-check'" class="reference internal" href="#correctness-check">Correctness Check</a></li>
<li><a :data-current="activeSection === '#conformity-check'" class="reference internal" href="#conformity-check">Conformity Check</a></li>
<li><a :data-current="activeSection === '#groundedness-check'" class="reference internal" href="#groundedness-check">Groundedness Check</a></li>
<li><a :data-current="activeSection === '#string-matching-check'" class="reference internal" href="#string-matching-check">String Matching Check</a></li>
<li><a :data-current="activeSection === '#metadata-check'" class="reference internal" href="#metadata-check">Metadata Check</a></li>
<li><a :data-current="activeSection === '#custom-check'" class="reference internal" href="#custom-check">Custom Check</a></li>
</ul>
</li>
<li><a :data-current="activeSection === '#assign-a-tag-to-a-conversation'" class="reference internal" href="#assign-a-tag-to-a-conversation">Assign a tag to a conversation</a><ul>
<li><a :data-current="activeSection === '#how-to-choose-the-right-tag'" class="reference internal" href="#how-to-choose-the-right-tag">How to choose the right tag?</a></li>
</ul>
</li>
</ul>
</div>
</aside>
</main>
</div>
</div><footer class="py-6 border-t border-border md:py-0">
<div class="container flex flex-col items-center justify-between gap-4 md:h-24 md:flex-row">
<div class="flex flex-col items-center gap-4 px-8 md:flex-row md:gap-2 md:px-0">
<p class="text-sm leading-loose text-center text-muted-foreground md:text-left">© 2024, Giskard Built with <a class="font-medium underline underline-offset-4" href="https://www.sphinx-doc.org" rel="noreferrer">Sphinx 7.3.7</a></p>
</div>
</div>
</footer>
</div>
<script src="../../_static/documentation_options.js?v=5929fcd5"></script>
<script src="../../_static/doctools.js?v=9a2dae69"></script>
<script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
<script defer="defer" src="../../_static/theme.js?v=e82a16a3"></script>
<script src="../../_static/design-tabs.js?v=f930bc37"></script>
</body>
</html>